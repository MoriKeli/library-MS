{% extends 'staff/base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"> -->
    <!-- <link rel="shortcut icon" href="images/book-icon.jpg" type="image/x-icon"> -->
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <title>Staff Homepage</title>
</head>
<body>
    {% block content %}
    <div style="padding: 10px 10px 10px">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="card card-body img-rounded text-center">
                        {% for gender in gender %}
                            {% if gender.gender == 'male' %}
                                <img src="{% static 'male.png' %}" alt="female.png" class="img-circle">
                            {% elif gender.gender == 'female' %}
                                <img src="{% static 'female.png' %}" alt="female.png" class="img-circle">
                            {% endif %}
                        {% endfor %}
                        <hr>
                        <div class="description text-left">
                            <h5>Staffname: {{user.username|title}}</h5>
                            {% for gen in gender %}
                                {% if gen.gender == 'male' %}
                                    <h5>Gender: {{gen.gender|title}}</h5>
                                {% elif gen.gender == 'female' %}
                                    <h5>Gender: {{gen.gender|title}}</h5>
                                {% endif %}
                            {% endfor %}
                            {% for role in roles %}
                                {% if role.role == 'librarian' %}
                                    <h5>Role: {{role.role|title}}</h5>
                                {% else %}
                                    <h5>Role: Assistant</h5>
                                {% endif %}
                            {% endfor %}
                            <h5>Email Address: {{user.email}}</h5>
                            <h5>Last login: {{user.last_login}}</h5>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card card-body img-rounded text-center">
                        <div class="row">
                            <div class="col-sm-12">
                                <h4>Top 3 bookwormers</h4>
                            <hr style="margin-top: -1.3%;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <img id="rank-img" src="{% static 'book-icon3.png' %}" alt="" class="img-circle">
                            </div>
                            <div class="col-md-6">
                                <div class="row"> 
                                    <h5>Student 1 has borrowed a total of 200 books</h5>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-3">
                                <img id="rank-img" src="{% static 'book-icon3.png' %}" alt="" class="img-circle">
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <h5>Student 2 has borrowed a total of 100 books</h5>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-3">
                                <img id="rank-img" src="{% static 'book-icon3.png' %}" alt="" class="img-circle">
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <h5>Student 3 has borrowed a total of 50 books</h5>
                                </div>
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="card card-body img-rounded">
                        <div class="row">
                            <div class="col-md-12">
                                <h4 class="text-center">Books info. status</h4>
                            </div>
                        </div>
                        <div  class="row">
                            <div id="info" class="col-md-7">
                                <h5 href="#">Books Borrowed:</h5>
                                
                            </div>
                            <div id="info" class="col-md-4">
                                <span id="count-borrowed">{{books_borrowed}}</span>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div id="info" class="col-md-7">
                                <h5 href="#">Total books left in the lib:</h5>
                            </div>
                            <div id="info" class="col-md-4">
                                <span id="count-rate">{{total}}</span>
                            </div>
                        </div>
                        <hr>
                    </div>
                    <div class="col-md-12">
                        <div id="quick-link-card" class="card card-body img-rounded">
                            <div class="row">
                                <div class="col-sm-12 text-center"><h4>Quick links</h4></div>
                            </div>
                            <div id="quick-link" class="row">
                                <div class="col-md-12">
                                    <a href="{% url 'add_record' %}" class="btn btn-primary">Add a Book</a>
                                </div>
                            </div>
                            <div id="quick-link" class="row">
                                <div class="col-md-12">
                                    <a href="{% url 'search' %}" class="btn btn-primary">Search a Book</a>
                                </div>
                            </div>
                            <div id="quick-link" class="row">
                                <div class="col-md-12">
                                    <a href="{% url 'borrow' %}" class="btn btn-primary">Borrow/Return Book</a>
                                </div>
                            </div>
                            <div id="quick-link" class="row">
                                <div class="col-md-12">
                                    <a href="{% url 'logout' %}" class="btn btn-primary">Logout</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-8">
                    <div id="table" class="card card-body img-rounded">
                        <table class="table table-bordered table-condensed table-hover">
                            <thead>
                                <tr>
                                    <th>Borrower</th>
                                    <th>Book Ref. No.</th>
                                    <th>Book Title</th>
                                    <th>Author</th>
                                    <th>Publisher</th>
                                    <th>Date Borrowed</th>
                                    <th>Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for book in list_of_borrowed_books reversed %}
                                    <tr>
                                        <td>{{book.stud_name|title}}</td>
                                        <td>{{book.book_ref_no}}</td>
                                        <td>{{book.title|title}}</td>
                                        <td>{{book.author|title}}</td>
                                        <td>{{book.publisher|title}}</td>
                                        <td>{{book.date_borrowed}}</td>
                                        <td>{{book.type_of_book|title}}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="7">A list of recently borrowed books</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}
</body>
</html>